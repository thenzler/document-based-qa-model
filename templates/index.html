{% extends 'layout.html' %}

{% block head_extra %}
<style>
    .feature-card {
        height: 100%;
        transition: transform 0.2s;
    }
    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .feature-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: var(--scodi-primary);
    }
    .hero-section {
        background: linear-gradient(135deg, var(--scodi-primary-light), var(--scodi-primary));
        color: white;
        padding: 4rem 0;
        margin-bottom: 3rem;
    }
    .loader {
        border: 5px solid #f3f3f3;
        border-top: 5px solid var(--scodi-primary);
        border-radius: 50%;
        width: 30px;
        height: 30px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
        display: none;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-7">
                <h1 class="display-4 fw-bold mb-3">Dokumentenbasiertes Frage-Antwort-System</h1>
                <p class="lead mb-4">Stellen Sie Fragen zu Ihren Dokumenten und erhalten Sie präzise Antworten mit Quellenangaben. Ideal für Churn-Prediction und Kundenanalysen.</p>
                <div class="d-flex gap-3">
                    <a href="/qa" class="btn btn-light btn-lg">Fragen stellen</a>
                    <a href="/documents" class="btn btn-outline-light btn-lg">Dokumente verwalten</a>
                </div>
            </div>
            <div class="col-lg-5 d-flex justify-content-center">
                <div class="p-5 text-center">
                    <i class="fas fa-file-alt display-1"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mb-5">
    <div class="row mb-5">
        <div class="col-12 text-center">
            <h2 class="mb-4">Funktionen</h2>
            <p class="lead">Unser dokumentenbasiertes QA-System bietet verschiedene Möglichkeiten, Ihre Dokumente zu nutzen.</p>
        </div>
    </div>
    
    <div class="row g-4">
        <div class="col-md-6 col-lg-4">
            <div class="card feature-card">
                <div class="card-body text-center p-4">
                    <i class="fas fa-question-circle feature-icon"></i>
                    <h3 class="h4 mb-3">Frage & Antwort</h3>
                    <p>Stellen Sie Fragen zu Ihren Dokumenten und erhalten Sie präzise Antworten mit Quellenangaben.</p>
                    <a href="/qa" class="btn btn-primary mt-3">Jetzt ausprobieren</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4">
            <div class="card feature-card">
                <div class="card-body text-center p-4">
                    <i class="fas fa-file-alt feature-icon"></i>
                    <h3 class="h4 mb-3">Dokumentenverwaltung</h3>
                    <p>Laden Sie Dokumente hoch, organisieren Sie sie in Kategorien und verarbeiten Sie sie für optimale Ergebnisse.</p>
                    <a href="/documents" class="btn btn-primary mt-3">Dokumente verwalten</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4">
            <div class="card feature-card">
                <div class="card-body text-center p-4">
                    <i class="fas fa-chart-line feature-icon"></i>
                    <h3 class="h4 mb-3">Churn-Prediction</h3>
                    <p>Analysieren Sie Kundendaten, identifizieren Sie Abwanderungsrisiken und erhalten Sie Handlungsempfehlungen.</p>
                    <a href="/churn" class="btn btn-primary mt-3">Analysen starten</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="bg-light py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 order-lg-2 mb-4 mb-lg-0">
                <img src="/static/img/system-init.jpg" onerror="this.src='/api/placeholder/600/400'" class="img-fluid rounded shadow" alt="Systeminitialisierung">
            </div>
            <div class="col-lg-6 order-lg-1">
                <h2 class="mb-4">System starten</h2>
                <p class="lead">Bevor Sie beginnen, initialisieren Sie das System, um die Dokumente zu verarbeiten und die Modelle zu laden.</p>
                <button id="btn-initialize" class="btn btn-primary btn-lg mt-3">
                    <span id="btn-text">System initialisieren</span>
                    <div id="init-loader" class="loader"></div>
                </button>
            </div>
        </div>
    </div>
</div>

<div class="container my-5">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h2>Schnelleinstieg</h2>
            <p class="lead">Folgen Sie diesen Schritten, um mit dem System zu beginnen:</p>
        </div>
    </div>
    
    <div class="row g-4">
        <div class="col-md-6 col-lg-3">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">1</div>
                        <h4 class="ms-3 mb-0">Initialisieren</h4>
                    </div>
                    <p>Starten Sie das System, um Dokumente zu verarbeiten und Modelle zu laden.</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-3">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">2</div>
                        <h4 class="ms-3 mb-0">Dokumente</h4>
                    </div>
                    <p>Laden Sie Ihre Dokumente in den unterstützten Formaten hoch (PDF, DOCX, TXT, MD, HTML).</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-3">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">3</div>
                        <h4 class="ms-3 mb-0">Fragen</h4>
                    </div>
                    <p>Stellen Sie Fragen zu Ihren Dokumenten oder nutzen Sie die Churn-Prediction.</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-3">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">4</div>
                        <h4 class="ms-3 mb-0">Analysieren</h4>
                    </div>
                    <p>Arbeiten Sie mit den Antworten und Empfehlungen, um bessere Entscheidungen zu treffen.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const btnInitialize = document.getElementById('btn-initialize');
        const btnText = document.getElementById('btn-text');
        const initLoader = document.getElementById('init-loader');
        
        btnInitialize.addEventListener('click', function() {
            // Zeige Ladeanimation
            btnText.textContent = 'Initialisiere...';
            initLoader.style.display = 'block';
            btnInitialize.disabled = true;
            
            // Sende Anfrage zur Initialisierung
            fetch('/api/init', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    alert('Fehler bei der Initialisierung: ' + data.error);
                } else {
                    alert('System erfolgreich initialisiert!');
                    btnText.textContent = 'System initialisiert';
                }
            })
            .catch(error => {
                alert('Fehler bei der Initialisierung: ' + error.message);
            })
            .finally(() => {
                initLoader.style.display = 'none';
                btnInitialize.disabled = false;
            });
        });
    });
</script>
{% endblock %}